(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(31)},16:function(e,t,a){},18:function(e,t,a){},22:function(e,t,a){},24:function(e,t,a){},27:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),s=a(9),l=a.n(s),r=(a(16),a(18),a(20),a(2)),i=a(3),c=a(4),u=a(6),m=a(5),d=a(7);a(22);function f(e,t){"Enter"===t.key&&e.onSubmit(t)}function p(e,t){e.onChange(t)}function h(e){return o.a.createElement("input",{type:"text",className:"TodoInput",defaultValue:e.content,onKeyPress:f.bind(null,e),onChange:p.bind(null,e)})}a(24);function g(e){e.onToggle(e.todo)}function v(e){e.onDelete(e.todo)}function b(e){return o.a.createElement("div",{className:"TodoItem"},o.a.createElement("input",{type:"checkbox",checked:e.todo.complete,onChange:g.bind(null,e)}),o.a.createElement("span",{className:"title"},e.todo.title),o.a.createElement("button",{onClick:v.bind(null,e)},"\u5220\u9664"))}var E=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"forgotPassword"},o.a.createElement("h3",null,"\u91cd\u7f6e\u5bc6\u7801"),o.a.createElement("form",{className:"forgotPassword",onSubmit:this.props.onSubmit}," ",o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"\u90ae\u7bb1"),o.a.createElement("input",{type:"email",value:this.props.formData.email,onChange:this.props.onChange})),o.a.createElement("div",{className:"row actions"},o.a.createElement("button",{type:"submit"},"\u53d1\u9001\u91cd\u7f6e\u90ae\u4ef6"),o.a.createElement("span",{onClick:this.props.onForgotPassword},"\u8fd4\u56de\u767b\u5f55"))))}}]),t}(n.Component);function w(e){return o.a.createElement("form",{className:"signup",onSubmit:e.onSubmit},o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"\u7528\u6237\u540d"),o.a.createElement("input",{type:"text",value:e.formData.username,onChange:e.onChange})),o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"\u5bc6\u7801"),o.a.createElement("input",{type:"password",value:e.formData.password,onChange:e.onChange})),o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"\u90ae\u7bb1"),o.a.createElement("input",{type:"email",value:e.formData.email,onChange:e.onChange})),o.a.createElement("div",{className:"row actions"},o.a.createElement("button",{type:"submit"},"\u6ce8\u518c")))}function S(e){return o.a.createElement("form",{className:"signIn",onSubmit:e.onSubmit},o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"\u7528\u6237\u540d"),o.a.createElement("input",{type:"text",value:e.formData.username,onChange:e.onChange})),o.a.createElement("div",{className:"row"},o.a.createElement("label",null,"\u5bc6\u7801"),o.a.createElement("input",{type:"password",value:e.formData.password,onChange:e.onChange})),o.a.createElement("div",{className:"row actions"},o.a.createElement("button",{type:"submit"},"\u767b\u5f55"),o.a.createElement("span",{onClick:e.onForgotPassword},"\u5fd8\u8bb0\u5bc6\u7801\u4e86\uff1f")))}function C(e){return o.a.createElement("div",{className:"signInOrSignUp"},o.a.createElement("nav",null,o.a.createElement("label",null,o.a.createElement("input",{type:"radio",value:"signUp",checked:"signUp"===e.state.selected,onChange:e.switch})," \u6ce8\u518c"),o.a.createElement("label",null,o.a.createElement("input",{type:"radio",value:"signIn",checked:"signIn"===e.state.selected,onChange:e.switch})," \u767b\u5f55")),o.a.createElement("div",{className:"panes"},"signUp"===e.state.selected?o.a.createElement(w,{formData:e.state.formData,onSubmit:e.onSignUp,onChange:e.onChange}):o.a.createElement(S,{formData:e.state.formData,onChange:e.onChange,onSubmit:e.onSignIn,onForgotPassword:e.onForgotPassword})))}var y=a(1),D=a.n(y);function O(e){return Object(r.a)({id:e.id},e.attributes)}D.a.init({appId:"pobPweP83M7Wt1hgTDn7kRPI-gzGzoHsz",appKey:"t0YfmdrLBhYvd9T0Dc89b8P8"});D.a;var U={getByUser:function(e,t,a){var n=new D.a.Query("Todo");n.equalTo("deleted",!1),n.find().then(function(e){var a=e.map(function(e){return Object(r.a)({id:e.id},e.attributes)});t.call(null,a)},function(e){a&&a.call(null,e)})},create:function(e,t,a){var n=e.status,o=e.title,s=e.deleted,l=new(D.a.Object.extend("Todo"));l.set("title",o),l.set("status",n),l.set("deleted",s);var r=new D.a.ACL;r.setPublicReadAccess(!1),r.setWriteAccess(D.a.User.current(),!0),r.setReadAccess(D.a.User.current(),!0),l.setACL(r),l.save().then(function(e){console.log(e),t.call(null,e.id)},function(e){a&&a.call(null,e)})},update:function(e,t,a){var n=e.id,o=e.title,s=e.status,l=e.deleted,r=D.a.Object.createWithoutData("Todo",n);void 0!==o&&r.set("title",o),void 0!==s&&r.set("status",s),void 0!==l&&r.set("deleted",l),r.save().then(function(e){t&&t.call(null)},function(e){return a&&a.call(null,e)})},destroy:function(e,t,a){console.log(1),U.update({id:e,deleted:!0},t,a)}};function N(){var e=D.a.User.current();if(e)return O(e)}a(27);var j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).switch=function(e){a.setState({selected:e.target.value,showSign:!0,formData:{username:"",password:"",email:""}})},a.signUp=function(e){e.preventDefault();var t=a.state.formData,n=t.username,o=t.password,s=t.email;if(n&&o&&s)if(/^[a-z0-9]+@[a-z0-9]+\.[a-z]+$/i.test(s)){!function(e,t,a,n,o){var s=new D.a.User;s.setUsername(e),s.setPassword(t),s.setEmail(a),s.signUp().then(function(e){var t=O(e);n.call(null,t)},function(e){o.call(null,e)})}(n,o,s,function(e){a.props.stateUpdate.call(null,e)},function(e){switch(e.code){case 202:alert("\u7528\u6237\u540d\u5df2\u88ab\u5360\u7528");break;case 203:alert("\u6b64\u90ae\u7bb1\u5df2\u88ab\u5360\u7528");break;default:alert(e)}})}else alert("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\u683c\u5f0f");else alert("\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001\u6216\u90ae\u7bb1\u4e0d\u5f97\u4e3a\u7a7a")},a.signIn=function(e){e.preventDefault();var t=a.state.formData,n=t.username,o=t.password;if(n&&o){!function(e,t,a,n){D.a.User.logIn(e,t).then(function(e){var t=O(e);a.call(null,t)},function(e){n.call(null,e)})}(n,o,function(e){a.props.stateUpdate.call(null,e)},function(e){alert("\u7528\u6237\u540d\u4e0e\u5bc6\u7801\u4e0d\u5339\u914d\uff0c\u8bf7\u68c0\u67e5\u7528\u6237\u540d\u6216\u5bc6\u7801\u662f\u5426\u586b\u5199\u6b63\u786e")})}else alert("\u7528\u6237\u540d\u6216\u5bc6\u7801\u4e0d\u5f97\u4e3a\u7a7a")},a.changeFormData=function(e){var t=JSON.parse(JSON.stringify(a.state));"text"===e.target.type?t.formData.username=e.target.value.trim():t.formData[e.target.type]=e.target.value,a.setState(t)},a.showForgotPassword=function(){a.setState(Object(r.a)({},a.state,{showSign:!a.state.showSign}))},a.resetPassword=function(e){var t,n,o;e.preventDefault(),t=a.state.formData.email,D.a.User.requestPasswordReset(t).then(function(e){n.call(null,e)},function(e){o.call(null,e)})},a.state={selected:"signUp",showSign:!0,formData:{username:"",password:"",email:""}},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"UserDialog-Wrapper"},o.a.createElement("div",{className:"UserDialog"},this.state.showSign?o.a.createElement(C,{state:this.state,switch:this.switch,onSignIn:this.signIn,onSignUp:this.signUp,onChange:this.changeFormData,onForgotPassword:this.showForgotPassword}):o.a.createElement(E,{formData:this.state.formData,onSubmit:this.resetPassword,onChange:this.changeFormData,onForgotPassword:this.showForgotPassword})))}}]),t}(n.Component),P=(a(29),function(e){function t(e){var a;Object(i.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).addTodo=function(e){var t={title:e.target.value,complete:!1,deleted:!1};U.create(t,function(e){t.id=e,a.state.todoList.push(t),a.setState({newTodo:"",todoList:a.state.todoList})},function(e){console.log(e)})},a.changeTitle=function(e){a.setState({newTodo:e.target.value,todoList:a.state.todoList})},a.toggle=function(e){var t=e.status;e.status="completed"===e.status?"":"completed",U.update(e,function(){a.setState(a.state)},function(n){e.status=t,a.setState(a.state)})},a.delete=function(e){U.destroy(e.id,function(){e.deleted=!0,a.setState(a.state)})},a.stateUpdate=function(e){a.setState(Object(r.a)({},a.state,{user:e}))},a.signOut=function(){D.a.User.logOut(),a.stateUpdate({})},a.id=0,a.state={user:N()||{},newTodo:"test",todoList:[]};var n=N();return n&&U.getByUser(n,function(e){var t=JSON.parse(JSON.stringify(a.state));t.todoList=e,a.setState(t)}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"idMaker",value:function(){return this.id++}},{key:"render",value:function(){var e=this,t=this.state.todoList.filter(function(e){return!e.deleted}).map(function(t,a){return o.a.createElement("li",{key:a},o.a.createElement(b,{todo:t,onToggle:e.toggle,onDelete:e.delete}))});return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,this.state.user.username||"\u6211","\u7684\u5f85\u529e"),this.state.user.id?o.a.createElement("button",{onClick:this.signOut},"\u767b\u51fa"):null,o.a.createElement("div",{className:"App-header"},o.a.createElement(h,{content:this.state.newTodo,onSubmit:this.addTodo,onChange:this.changeTitle})),o.a.createElement("ol",null,t),this.state.user.id?null:o.a.createElement(j,{stateUpdate:this.stateUpdate}))}}]),t}(n.Component));l.a.render(o.a.createElement(P,null),document.getElementById("root"))}},[[10,2,1]]]);
//# sourceMappingURL=main.46aba918.chunk.js.map