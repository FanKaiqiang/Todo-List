{"version":3,"sources":["TodoInput.js","TodoItem.js","forgotPassword.js","signUp.js","signIn.js","signInOrSignUp.js","leanCloud.js","UserDialog.js","App.js","index.js"],"names":["submit","props","e","key","onSubmit","changeTitle","onChange","TodoInput","react_default","a","createElement","type","className","defaultValue","content","onKeyPress","bind","toggle","onToggle","todo","toDelete","onDelete","TodoItem","checked","complete","title","onClick","ForgotPassword","this","value","formData","email","onForgotPassword","Component","SignUp","username","password","SignIn","SignInOrSignUp","state","selected","switch","onSignUp","onSignIn","getUserFromAVUser","AVUser","Object","objectSpread","id","attributes","AV","init","appId","appKey","TodoModel","getByUser","user","successFn","errorFn","query","Query","equalTo","find","then","response","array","map","t","call","error","create","_ref","status","deleted","extend","set","acl","ACL","setPublicReadAccess","setWriteAccess","User","current","setReadAccess","setACL","save","console","log","update","_ref2","createWithoutData","undefined","destroy","todoId","getCurrentUser","UserDialog","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","setState","target","showSign","signUp","preventDefault","_this$state$formData","test","setUsername","setPassword","setEmail","loginedUser","stateUpdate","code","alert","signIn","_this$state$formData2","logIn","changeFormData","stateCopy","JSON","parse","stringify","trim","showForgotPassword","resetPassword","requestPasswordReset","success","forgotPassword_ForgotPassword","App","addTodo","event","newTodo","todoList","push","oldStatus","delete","signOut","logOut","todos","_this2","filter","item","index","TodoItem_TodoItem","TodoInput_TodoInput","UserDialog_UserDialog","ReactDOM","render","App_App","document","getElementById"],"mappings":"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","file":"static/js/main.46aba918.chunk.js","sourcesContent":["import React from 'react'\r\nimport './TodoInput.scss'\r\n\r\n\r\nfunction submit(props, e) {\r\n  if (e.key === 'Enter') {\r\n    props.onSubmit(e)\r\n  }\r\n}\r\n\r\nfunction changeTitle(props, e) {\r\n  props.onChange(e)\r\n}\r\nexport default function TodoInput(props) {\r\n  return (\r\n    <input type=\"text\" className=\"TodoInput\"\r\n      defaultValue={props.content}\r\n      onKeyPress={submit.bind(null, props)}\r\n      onChange={changeTitle.bind(null, props)} />\r\n  )\r\n}\r\n","import React from 'react';\r\nimport './TodoItem.scss'\r\n\r\nfunction toggle  (props)  {\r\n  props.onToggle(props.todo)\r\n}\r\nfunction toDelete  (props)  {\r\n  props.onDelete(props.todo)\r\n}\r\nexport default function TodoItem(props) {\r\n  return (\r\n    <div className=\"TodoItem\">\r\n      <input type=\"checkbox\" checked={props.todo.complete}\r\n        onChange={toggle.bind(null,props)} />\r\n      <span className=\"title\">{props.todo.title}</span>\r\n      <button onClick={toDelete.bind(null,props)}>删除</button>\r\n    </div>\r\n  )\r\n}\r\n","import React, { Component } from 'react'\r\n\r\nexport default class ForgotPassword extends Component {\r\n  render() {\r\n    return (\r\n      <div className=\"forgotPassword\">\r\n        <h3>\r\n          重置密码\r\n        </h3>\r\n        <form className=\"forgotPassword\" onSubmit={this.props.onSubmit}> {/* 登录*/}\r\n          <div className=\"row\">\r\n            <label>邮箱</label>\r\n            <input type=\"email\" value={this.props.formData.email}\r\n              onChange={this.props.onChange} />\r\n          </div>\r\n          <div className=\"row actions\">\r\n            <button type=\"submit\">发送重置邮件</button>\r\n            <span onClick={this.props.onForgotPassword}>返回登录</span>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n\r\n  }\r\n}\r\n","import React from 'react'\r\n\r\nexport default function SignUp (props) {\r\n\r\n    return (\r\n      <form className=\"signup\" onSubmit={props.onSubmit}>\r\n        <div className=\"row\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" value={props.formData.username} onChange={props.onChange} />\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={props.formData.password} onChange={props.onChange} />\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>邮箱</label>\r\n          <input type=\"email\" value={props.formData.email} onChange={props.onChange} />\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">注册</button>\r\n        </div>\r\n      </form>\r\n    )\r\n\r\n\r\n}\r\n","import React from 'react'\r\n\r\nexport default function SignIn (props){\r\n\r\n    return(\r\n      <form className=\"signIn\" onSubmit={props.onSubmit}>\r\n        <div className=\"row\">\r\n          <label>用户名</label>\r\n          <input type=\"text\" value={props.formData.username} onChange={props.onChange} />\r\n        </div>\r\n        <div className=\"row\">\r\n          <label>密码</label>\r\n          <input type=\"password\" value={props.formData.password} onChange={props.onChange} />\r\n        </div>\r\n        <div className=\"row actions\">\r\n          <button type=\"submit\">登录</button>\r\n          <span onClick={props.onForgotPassword}>忘记密码了？</span>\r\n        </div>\r\n      </form>\r\n    )\r\n  \r\n}","import React from 'react';\r\nimport SignUp from './signUp'\r\nimport SignIn from './signIn'\r\n\r\nexport default function SignInOrSignUp(props) {\r\n  return (\r\n    <div className=\"signInOrSignUp\">\r\n      <nav>\r\n        <label>\r\n          <input type=\"radio\" value=\"signUp\"\r\n            checked={props.state.selected === 'signUp'}\r\n            onChange={props.switch}\r\n          /> 注册</label>\r\n        <label>\r\n          <input type=\"radio\" value=\"signIn\"\r\n            checked={props.state.selected === 'signIn'}\r\n            onChange={props.switch}\r\n          /> 登录</label>\r\n      </nav>\r\n      <div className=\"panes\">\r\n        {props.state.selected === 'signUp' ?\r\n          <SignUp formData={props.state.formData}\r\n            onSubmit={props.onSignUp}\r\n            onChange={props.onChange} />\r\n          :\r\n          <SignIn formData={props.state.formData}\r\n            onChange={props.onChange}\r\n            onSubmit={props.onSignIn}\r\n            onForgotPassword={props.onForgotPassword} />}\r\n      </div>\r\n    </div>\r\n  )\r\n\r\n}","import AV from 'leancloud-storage'\r\n\r\nvar APP_ID = 'pobPweP83M7Wt1hgTDn7kRPI-gzGzoHsz';\r\nvar APP_KEY = 't0YfmdrLBhYvd9T0Dc89b8P8';\r\n\r\nAV.init({\r\n  appId: APP_ID,\r\n  appKey: APP_KEY\r\n})\r\n\r\nfunction getUserFromAVUser(AVUser) {\r\n  return {\r\n    id: AVUser.id,\r\n    ...AVUser.attributes\r\n  }\r\n}\r\n\r\nexport default AV\r\n\r\nexport const TodoModel = {// 所有跟 Todo 相关的 LeanCloud 操作都放到这里\r\n  getByUser(user, successFn, errorFn) {\r\n    // 文档见 https://leancloud.cn/docs/leanstorage_guide-js.html#批量操作\r\n    let query = new AV.Query('Todo')\r\n    query.equalTo('deleted', false);\r\n    query.find().then((response) => {\r\n      let array = response.map((t) => {\r\n        return { id: t.id, ...t.attributes }\r\n      })\r\n      successFn.call(null, array)\r\n    }, (error) => {\r\n      errorFn && errorFn.call(null, error)\r\n    })\r\n  },\r\n\r\n  create({ status, title, deleted }, successFn, errorFn) {\r\n    let Todo = AV.Object.extend('Todo') //建立todo数据库\r\n    let todo = new Todo()//新建todo对象\r\n    todo.set('title', title)\r\n    todo.set('status', status)\r\n    todo.set('deleted', deleted)\r\n\r\n    // 根据文档 https://leancloud.cn/docs/acl-guide.html#单用户权限设置\r\n    // 这样做就可以让这个 Todo 只被当前用户看到\r\n    let acl = new AV.ACL()\r\n    acl.setPublicReadAccess(false) // 注意这里是 false\r\n    acl.setWriteAccess(AV.User.current(), true)\r\n    acl.setReadAccess(AV.User.current(), true)\r\n\r\n    todo.setACL(acl);\r\n\r\n    todo.save().then(function (response) {\r\n      console.log(response)\r\n      successFn.call(null, response.id)\r\n    }, function (error) {\r\n      errorFn && errorFn.call(null, error)\r\n    });\r\n\r\n  },\r\n  update({ id, title, status, deleted }, successFn, errorFn) {\r\n    // 文档 https://leancloud.cn/docs/leanstorage_guide-js.html#更新对象\r\n    let todo = AV.Object.createWithoutData('Todo', id)\r\n    title !== undefined && todo.set('title', title)\r\n    status !== undefined && todo.set('status', status)\r\n    deleted !== undefined && todo.set('deleted', deleted)\r\n    // 为什么我要像上面那样写代码？\r\n    // 考虑如下场景\r\n    // update({id:1, title:'hi'})\r\n    // 调用 update 时，很有可能没有传 status 和 deleted\r\n    // 也就是说，用户只想「局部更新」\r\n    // 所以我们只 set 该 set 的\r\n    // 那么为什么不写成 title && todo.set('title', title) 呢，为什么要多此一举跟 undefined 做对比呢？\r\n    // 考虑如下场景\r\n    // update({id:1, title: '', status: null}}\r\n    // 用户想将 title 和 status 置空，我们要满足\r\n    todo.save().then((response) => {\r\n      successFn && successFn.call(null)\r\n    }, (error) => errorFn && errorFn.call(null, error))\r\n  },\r\n\r\n  destroy(todoId, successFn, errorFn) {\r\n    // 文档 https://leancloud.cn/docs/leanstorage_guide-js.html#删除对象\r\n    // let todo = AV.Object.createWithoutData('Todo', todoId)//在todo表中删除为todoid的值\r\n    // todo.destroy().then(function (response) {\r\n    //   successFn && successFn.call(null)\r\n    // }, function (error) {\r\n    //   errorFn && errorFn.call(null, error)\r\n    // });\r\n    // 我们不应该删除数据，而是将数据标记为 deleted\r\n    console.log(1)\r\n    TodoModel.update({id: todoId, deleted: true}, successFn, errorFn)\r\n  }\r\n}\r\n\r\nexport function signUp(username, password, email, successFn, errorFn) {//leancloud的用户注册API\r\n  // 新建 AVUser 对象实例\r\n  var user = new AV.User()\r\n  // 设置用户名\r\n  user.setUsername(username)\r\n  // 设置密码\r\n  user.setPassword(password)\r\n  // 设置邮箱\r\n  user.setEmail(email);\r\n  user.signUp().then(function (loginedUser) {//注册\r\n    let user = getUserFromAVUser(loginedUser)\r\n    successFn.call(null, user)//成功回调\r\n  }, function (error) {\r\n    errorFn.call(null, error)//失败回调\r\n  })\r\n}\r\n\r\nexport function signIn(username, password, successFn, errorFn) {//leancloud的登录注册API\r\n  AV.User.logIn(username, password).then(function (loginedUser) {//注册\r\n    let user = getUserFromAVUser(loginedUser)\r\n    successFn.call(null, user)//成功回调\r\n  }, function (error) {\r\n    errorFn.call(null, error)//失败回调\r\n  })\r\n}\r\n\r\nexport function getCurrentUser() {//获取当前缓存的用户信息\r\n  let user = AV.User.current()\r\n  if (user) {\r\n    return getUserFromAVUser(user)\r\n  }\r\n}\r\n\r\nexport function signOut() {//登出操作\r\n  AV.User.logOut()\r\n}\r\n\r\nexport function sendPasswordResetEmail(email, successFn, errorFn) {\r\n  AV.User.requestPasswordReset(email).then(function (success) {\r\n    successFn.call(null, success)\r\n  }, function (error) {\r\n    errorFn.call(null, error)\r\n  })\r\n}\r\n","import React, { Component } from 'react'\r\nimport ForgotPassword from './forgotPassword'\r\nimport SignInOrSignUp from './signInOrSignUp'\r\nimport { signUp, signIn, sendPasswordResetEmail } from './leanCloud'\r\nimport './UserDialog.scss'\r\n\r\nexport default class UserDialog extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      selected: 'signUp',\r\n      showSign: true,\r\n      formData: {\r\n        username: '',\r\n        password: '',\r\n        email: ''\r\n      }\r\n    }\r\n  }\r\n\r\n  switch = (e) => {//切换状态清空输入框\r\n    this.setState({\r\n      selected: e.target.value,\r\n      showSign: true,\r\n      formData: {\r\n        username: '',\r\n        password: '',\r\n        email: ''\r\n      }\r\n    })\r\n  }\r\n\r\n  signUp = (e) => {//注册按键，将填入内容调用注册API\r\n    e.preventDefault()\r\n    let { username, password, email } = this.state.formData\r\n    let re = /^[a-z0-9]+@[a-z0-9]+\\.[a-z]+$/i\r\n    if (!username || !password || !email) {\r\n      alert('用户名、密码、或邮箱不得为空')\r\n      return\r\n    } else if (!re.test(email)) {\r\n      alert('请输入正确的邮箱格式')\r\n      return\r\n    }\r\n    let success = (user) => {\r\n      this.props.stateUpdate.call(null, user)\r\n    }\r\n    let error = (error) => {\r\n      switch (error.code) {\r\n        case 202:\r\n          alert('用户名已被占用')\r\n          break\r\n        case 203:\r\n          alert('此邮箱已被占用')\r\n          break\r\n        default:\r\n          alert(error)\r\n          break\r\n      }\r\n    }\r\n    signUp(username, password, email, success, error)\r\n  }\r\n\r\n  signIn = (e) => {//登录按键，将填入内容调用登录API\r\n    e.preventDefault()\r\n    let { username, password } = this.state.formData\r\n    if (!username || !password) {\r\n      alert('用户名或密码不得为空')\r\n      return\r\n    }\r\n    let success = (user) => {\r\n      this.props.stateUpdate.call(null, user)\r\n    }\r\n    let error = (error) => {\r\n      alert('用户名与密码不匹配，请检查用户名或密码是否填写正确')\r\n    }\r\n    signIn(username, password, success, error)\r\n  }\r\n\r\n  changeFormData = (e) => {//输入框内容更新时，更新state.fromData\r\n    let stateCopy = JSON.parse(JSON.stringify(this.state))\r\n    if (e.target.type === 'text') {\r\n      stateCopy.formData.username = e.target.value.trim()\r\n    } else {\r\n      stateCopy.formData[e.target.type] = e.target.value\r\n    }\r\n    this.setState(stateCopy)\r\n  }\r\n\r\n  showForgotPassword = () => {//展示忘记密码界面\r\n    this.setState({\r\n      ...this.state,\r\n      showSign: !this.state.showSign\r\n    })\r\n  }\r\n\r\n  resetPassword = (e) => {\r\n    e.preventDefault()\r\n    sendPasswordResetEmail(this.state.formData.email)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"UserDialog-Wrapper\">\r\n        <div className=\"UserDialog\">\r\n          {this.state.showSign ?\r\n            <SignInOrSignUp state={this.state}\r\n              switch={this.switch}\r\n              onSignIn={this.signIn}\r\n              onSignUp={this.signUp}\r\n              onChange={this.changeFormData}\r\n              onForgotPassword={this.showForgotPassword}\r\n            />\r\n            :\r\n            <ForgotPassword formData={this.state.formData}\r\n              onSubmit={this.resetPassword}\r\n              onChange={this.changeFormData}\r\n              onForgotPassword={this.showForgotPassword}\r\n            />}\r\n        </div>\r\n      </div >\r\n    )\r\n  }\r\n}","import React, { Component } from 'react'\nimport TodoInput from './TodoInput'\nimport TodoItem from './TodoItem'\nimport UserDialog from './UserDialog'\nimport { getCurrentUser, signOut , TodoModel} from './leanCloud'\nimport './App.scss'\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props)\n    this.id = 0\n    this.state = {\n      user: getCurrentUser() || {},\n      newTodo: 'test',\n      todoList: []\n    }\n    let user = getCurrentUser()\n    if (user) {\n      TodoModel.getByUser(user, (todos) => {\n        let stateCopy = JSON.parse(JSON.stringify(this.state))\n        stateCopy.todoList = todos\n        this.setState(stateCopy)\n      })\n    }\n  }\n\n  idMaker() {\n    return this.id++\n  }\n\n  addTodo = (event) => {//传递给input的方法，event为input元素\n    let newTodo = {\n      title: event.target.value,\n      complete: false,\n      deleted: false\n    }\n    TodoModel.create(newTodo, (id) => {\n      newTodo.id = id\n      this.state.todoList.push(newTodo)\n      this.setState({\n        newTodo: '',\n        todoList: this.state.todoList\n      })\n    }, (error) => {\n      console.log(error)\n    })\n  }\n\n  changeTitle = (event) => {\n    this.setState({\n      newTodo: event.target.value,\n      todoList: this.state.todoList\n    })\n  }\n\n  toggle = (todo) => {//勾选（更新）操作\n    let oldStatus = todo.status\n    todo.status = todo.status === 'completed' ? '' : 'completed'\n    TodoModel.update(todo, () => {\n      this.setState(this.state)\n    }, (error) => {\n      todo.status = oldStatus\n      this.setState(this.state)\n    })\n  }\n\n  delete = (todo) => {//删除操作\n    TodoModel.destroy(todo.id, () => {\n      todo.deleted = true\n      this.setState(this.state)\n    })\n  }\n\n  stateUpdate = (user) => {//登录更新state\n    this.setState({\n      ...this.state,\n      user\n    })\n  }\n\n  signOut = () =>{//调用登出API，并重置state\n    signOut()\n    this.stateUpdate({})\n  }\n\n  render() {\n    let todos = this.state.todoList.filter(item => !item.deleted).map((item, index) => {\n      return (\n        <li key={index}>\n          <TodoItem todo={item} onToggle={this.toggle} onDelete={this.delete} />\n        </li>)\n    })\n    return (\n      <div className=\"App\">\n        <h1>\n          {this.state.user.username || '我'}的待办\n        \n        </h1>\n        {this.state.user.id ? <button onClick={this.signOut}>登出</button> : null}\n        <div className=\"App-header\">\n          <TodoInput content={this.state.newTodo}\n            onSubmit={this.addTodo}\n            onChange={this.changeTitle} />\n        </div>\n        <ol>\n          {todos}\n        </ol>\n        {this.state.user.id ? null : <UserDialog stateUpdate={this.stateUpdate} />}\n      </div>\n    )\n\n  }\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.scss'\nimport './reset.scss'\nimport 'normalize.css'\nimport App from './App'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}